# üîí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
Copy operation failed: [Error: EPERM: operation not permitted, mkdir 'E:\']
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–ª—Å—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–µ–Ω—å –¥–∏—Å–∫–∞ E:\, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```javascript
function validateDestinationPath(destPath) {
    const normalizedPath = path.normalize(destPath);
    
    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ—Ä–Ω–µ–≤—ã—Ö –ø–∞–ø–æ–∫ –¥–∏—Å–∫–æ–≤
    const isDriveRoot = /^[A-Z]:\\?$/i.test(normalizedPath);
    if (isDriveRoot) {
        return {
            valid: false,
            error: 'Cannot write to drive root. Access denied.',
            suggestions: [
                `${normalizedPath}FileStash-Copy`,
                `${normalizedPath}Users\\User\\Desktop\\FileStash-Copy`,
                `${normalizedPath}Temp\\FileStash-Copy`
            ]
        };
    }
    
    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–ø–æ–∫
    const restrictedPaths = [
        /^[A-Z]:\\Windows/i,
        /^[A-Z]:\\Program Files/i,
        /^[A-Z]:\\System Volume Information/i
    ];
    
    return { valid: true };
}
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
```javascript
// –ü–æ–∫–∞–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø—É—Ç–µ–π
function showPathSuggestionsModal(errorMessage, suggestions, operation) {
    showModal('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞', `
        <div style="color: #e74c3c;">‚ö†Ô∏è ${errorMessage}</div>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø—É—Ç–µ–π:</p>
        ${suggestions.map(suggestion => `
            <div>
                <code>${suggestion}</code>
                <button onclick="useSuggestedPath('${suggestion}')">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
            </div>
        `).join('')}
    `);
}
```

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```html
<div style="color: #28a745;">‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—É—Ç–∏:</div>
<div>
    ‚Ä¢ C:\FileStash-Test<br>
    ‚Ä¢ C:\Users\–í–∞—à–µ–ò–º—è\Desktop\–ö–æ–ø–∏–∏<br>
    ‚Ä¢ C:\Temp\FileStash-Copy
</div>
<div style="color: #dc3545;">‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ:</div>
<div>
    ‚Ä¢ –ö–æ—Ä–Ω–µ–≤—ã–µ –ø–∞–ø–∫–∏ –¥–∏—Å–∫–æ–≤ (C:\, E:\, F:\)<br>
    ‚Ä¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–ø–∫–∏ (Windows, Program Files)
</div>
```

## üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø—É—Ç–∏

### ‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:
- **–ö–æ—Ä–Ω–µ–≤—ã–µ –ø–∞–ø–∫–∏ –¥–∏—Å–∫–æ–≤**: `C:\`, `E:\`, `F:\` –∏ —Ç.–¥.
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–ø–∫–∏**: `C:\Windows`, `C:\Program Files`
- **–°–ª—É–∂–µ–±–Ω—ã–µ –ø–∞–ø–∫–∏**: `C:\System Volume Information`

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞–ø–∫–∏**: `C:\Users\Username\Desktop\`
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏**: `C:\Temp\`, `C:\FileStash-Test`
- **–ü–æ–¥–ø–∞–ø–∫–∏ –¥–∏—Å–∫–æ–≤**: `E:\FileStash-Copy`, `F:\MyFiles`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚ùå EPERM: operation not permitted, mkdir 'E:\'
‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–ª–æ —Å –æ—à–∏–±–∫–æ–π
‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –¥–µ–ª–∞—Ç—å
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π
‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
‚úÖ –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏
‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç:
```bash
node test-path-validation.js
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤ `E:\`
2. –£–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
3. –ù–∞–∂–º–∏—Ç–µ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å" –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
4. –û–ø–µ—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –ø–∞–ø–∫–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç `C:\FileStash-Test`
2. **–£–º–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** - —É—á–∏—Ç—ã–≤–∞—é—Ç —Ç–µ–∫—É—â–∏–π –¥–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** - –∑–µ–ª–µ–Ω—ã–µ/–∫—Ä–∞—Å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
4. **–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä** - –∫–Ω–æ–ø–∫–∏ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ–ª—å—à–µ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç EPERM –æ—à–∏–±–∫–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–ª –±–æ–ª–µ–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ